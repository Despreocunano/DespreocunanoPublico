---
import { UserPlus, FileText, Eye, Share2 } from 'lucide-astro';
---

<section id="como-crear" class="bg-white py-20">
    <div class="max-w-7xl mx-auto px-5">
        <div class="text-center mb-12">
            <span class="inline-block bg-rose-100 text-lovio-500 px-4 py-1 rounded-full text-sm font-semibold mb-4">Paso a paso</span>
            <h2 class="font-serif text-4xl lg:text-5xl text-gray-900">¿Cómo crear tu invitación?</h2>
            <p class="text-gray-600 mt-3 text-xl">En 4 simples pasos podrás visualizar la experiencia que tendran tus invitados.</p>
        </div>

        <!-- Tabs header -->
        <div id="how-tabs" class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-10">
            <button data-step="0" class="tab-btn group flex items-center gap-3 justify-center rounded-2xl border border-lovio-500 bg-rose-50 px-4 py-3 shadow-sm hover:border-lovio-500 hover:bg-rose-50 focus:outline-none">
                <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-rose-100 ring-2 ring-rose-200">
                    <UserPlus size="18" class="text-lovio-500" />
                </span>
                <span class="text-sm font-semibold text-gray-800">Crear cuenta</span>
            </button>
            <button data-step="1" class="tab-btn group flex items-center gap-3 justify-center rounded-2xl border border-rose-200 bg-white px-4 py-3 shadow-sm hover:border-lovio-500 hover:bg-rose-50 focus:outline-none">
                <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-rose-100 ring-2 ring-rose-200">
                    <FileText size="18" class="text-lovio-500" />
                </span>
                <span class="text-sm font-semibold text-gray-800">Elige diseño y completa</span>
            </button>
            <button data-step="2" class="tab-btn group flex items-center gap-3 justify-center rounded-2xl border border-rose-200 bg-white px-4 py-3 shadow-sm hover:border-lovio-500 hover:bg-rose-50 focus:outline-none">
                <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-rose-100 ring-2 ring-rose-200">
                    <Eye size="18" class="text-lovio-500" />
                </span>
                <span class="text-sm font-semibold text-gray-800">Visualiza</span>
            </button>
            <button data-step="3" class="tab-btn group flex items-center gap-3 justify-center rounded-2xl border border-rose-200 bg-white px-4 py-3 shadow-sm hover:border-lovio-500 hover:bg-rose-50 focus:outline-none">
                <span class="inline-flex items-center justify-center w-9 h-9 rounded-full bg-rose-100 ring-2 ring-rose-200">
                    <Share2 size="18" class="text-lovio-500" />
                </span>
                <span class="text-sm font-semibold text-gray-800">Publica y comparte</span>
            </button>
        </div>

        <!-- Panels -->
        <div id="how-panels" class="relative">
            <!-- Panel 0 -->
            <div data-panel="0" class="tab-panel rounded-3xl border border-rose-200 bg-white p-6 md:p-10 shadow-sm">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="font-serif text-3xl text-gray-900 mb-3">Crea tu cuenta</h3>
                        <p class="text-gray-600 mb-6">Regístrate gratis y accede a todos los diseños disponibles. ¡Toma menos de 30 segundos!</p>
                        <a href="https://app.lovio.cl/auth?mode=register" class="inline-block bg-primary text-white px-5 py-2.5 rounded-full font-semibold hover:bg-lovio-600 transition">Empezar</a>
                    </div>
                    <div class="bg-gradient-to-br from-gray-50 to-white border border-rose-100 rounded-2xl p-5">
                        <div class="h-3 w-32 bg-rose-100 rounded mb-4"></div>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="h-10 bg-gray-100 rounded"></div>
                            <div class="h-10 bg-gray-100 rounded"></div>
                            <div class="h-10 bg-gray-100 rounded"></div>
                            <div class="h-10 bg-gray-100 rounded"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel 1 -->
            <div data-panel="1" class="tab-panel hidden rounded-3xl border border-rose-200 bg-white p-6 md:p-10 shadow-sm">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="font-serif text-3xl text-gray-900 mb-3">Elige el diseño y completa tu información</h3>
                        <p class="text-gray-600 mb-6">Elige entre más de 20 diseños únicos y personaliza cada detalle de tu invitación.</p>
                        <div class="flex gap-3">
                            <span class="h-8 w-24 bg-rose-100 rounded"></span>
                            <span class="h-8 w-16 bg-rose-100 rounded"></span>
                        </div>
                    </div>
                    <div class="bg-white border border-rose-100 rounded-2xl p-5">
                        <div class="h-28 rounded bg-[url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=800&auto=format&fit=crop')] bg-cover bg-center mb-4"></div>
                        <div class="h-9 bg-gray-100 rounded mb-2"></div>
                        <div class="h-9 bg-gray-100 rounded"></div>
                    </div>
                </div>
            </div>

            <!-- Panel 2 -->
            <div data-panel="2" class="tab-panel hidden rounded-3xl border border-rose-200 bg-white p-6 md:p-10 shadow-sm">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="font-serif text-3xl text-gray-900 mb-3">Visualiza tu parte digital</h3>
                        <p class="text-gray-600 mb-6">Revisa en tiempo real cómo se ve tu invitación y ajusta lo que necesites.</p>
                    </div>
                    <!-- Compact browser-style preview to unify height -->
                    <div class="w-full max-w-md mx-auto bg-white border border-rose-100 rounded-2xl shadow-sm">
                        <div class="flex items-center gap-1 px-3 py-2 border-b border-rose-100">
                            <span class="w-2.5 h-2.5 rounded-full bg-rose-300"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-amber-300"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-emerald-300"></span>
                            <div class="ml-3 h-6 flex-1 bg-gray-100 rounded"></div>
                        </div>
                        <div class="p-4">
                            <div class="h-36 rounded bg-[url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=800&auto=format&fit=crop')] bg-cover bg-center mb-4"></div>
                            <div class="h-3 w-40 bg-rose-100 rounded mb-2"></div>
                            <div class="h-3 w-24 bg-gray-100 rounded"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel 3 -->
            <div data-panel="3" class="tab-panel hidden rounded-3xl border border-rose-200 bg-white p-6 md:p-10 shadow-sm">
                <div class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h3 class="font-serif text-3xl text-gray-900 mb-3">Publícalo y comparte con tus invitados</h3>
                        <p class="text-gray-600 mb-6">Activa tu invitación con un clic y compártela al instante por WhatsApp, redes o correo.</p>
                        <div class="flex items-center gap-3">
                            <div class="h-10 flex-1 bg-gray-100 rounded"></div>
                            <button class="bg-primary text-white px-4 py-2 rounded font-semibold hover:bg-lovio-600 transition">Copiar</button>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-rose-50 to-white border border-rose-100 rounded-2xl p-5">
                        <div class="h-24 bg-gray-100 rounded mb-3"></div>
                        <div class="grid grid-cols-3 gap-2">
                            <div class="h-9 bg-gray-100 rounded"></div>
                            <div class="h-9 bg-gray-100 rounded"></div>
                            <div class="h-9 bg-gray-100 rounded"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-10">
            <a href="https://app.lovio.cl/auth?mode=register" class="inline-block bg-primary text-white px-6 py-3 rounded-full font-semibold shadow hover:bg-lovio-600 transition">Empieza gratis</a>
        </div>
    </div>

    <script>
        const tabs = document.querySelectorAll('#how-tabs .tab-btn');
        const panels = document.querySelectorAll('#how-panels .tab-panel');
        let active = 0;
        function setActive(i: number){
            active = i;
            tabs.forEach((t,idx)=>{
                t.classList.toggle('border-lovio-500', idx===i);
                t.classList.toggle('bg-rose-50', idx===i);
            });
            panels.forEach((p,idx)=>{
                if(idx===i){
                    p.classList.remove('hidden');
                    p.classList.add('animate-fadeIn');
                } else {
                    p.classList.add('hidden');
                    p.classList.remove('animate-fadeIn');
                }
            });
        }
        tabs.forEach((t,idx)=>t.addEventListener('click',()=>setActive(idx)));
        setActive(0);
    </script>

    <style>
        @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
        .animate-fadeIn{animation:fadeIn .25s ease-out}
    </style>
</section>
